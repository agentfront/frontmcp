---
title: Runtime API Reference
sidebarTitle: Runtime
icon: gear
description: Complete API reference for the @frontmcp/ui runtime system, including template context, helper functions, MCP Bridge, and wrapper utilities.
---

## Template Context

### TemplateContext

Context passed to template builder functions.

```typescript
interface TemplateContext<In, Out> {
  /** The input arguments passed to the tool */
  input: In;

  /** The raw output returned by the tool's execute method */
  output: Out;

  /** The structured content parsed from the output */
  structuredContent?: unknown;

  /** Helper functions for template rendering */
  helpers: TemplateHelpers;
}
```

Usage in templates:

```typescript
const template: TemplateBuilderFn<WeatherInput, WeatherOutput> = (ctx) => {
  const { input, output, helpers } = ctx;

  return `
    <div class="p-4">
      <h1>${helpers.escapeHtml(input.location)}</h1>
      <p>Temperature: ${output.temperature}°F</p>
    </div>
  `;
};
```

---

## Template Helpers

### TemplateHelpers

Helper functions available in every template context.

```typescript
interface TemplateHelpers {
  escapeHtml: (value: unknown) => string;
  formatDate: (date: Date | string, format?: string) => string;
  formatCurrency: (amount: number, currency?: string) => string;
  uniqueId: (prefix?: string) => string;
  jsonEmbed: (data: unknown) => string;
}
```

### `escapeHtml(value)`

Escapes HTML special characters to prevent XSS attacks.

```typescript
helpers.escapeHtml('<script>alert("xss")</script>');
// '&lt;script&gt;alert("xss")&lt;/script&gt;'

helpers.escapeHtml('Tom & Jerry');
// 'Tom &amp; Jerry'

helpers.escapeHtml(null);
// ''

helpers.escapeHtml(42);
// '42'
```

| Character | Escaped  |
| --------- | -------- |
| `&`       | `&amp;`  |
| `<`       | `&lt;`   |
| `>`       | `&gt;`   |
| `"`       | `&quot;` |
| `'`       | `&#x27;` |

Pass any value (strings, numbers, booleans, dates). `null` and `undefined` automatically return an empty string so you can call `escapeHtml` on optional metadata without defensive checks.

<Warning>
  Always use `escapeHtml` for user-provided content to prevent XSS vulnerabilities.
</Warning>

<Tip>
  `escapeHtml` is also exported from `@frontmcp/ui`, so server-side helpers, React components, and Handlebars templates all rely on the exact same escaping logic.
</Tip>

### `formatDate(date, format?)`

Formats a date for display.

```typescript
helpers.formatDate(new Date());        // "12/3/2024" (localized)
helpers.formatDate('2024-01-15');      // "1/15/2024"
helpers.formatDate(date, 'iso');       // "2024-01-15T00:00:00.000Z"
helpers.formatDate(date, 'time');      // "10:30:45 AM"
helpers.formatDate(date, 'datetime');  // "1/15/2024, 10:30:45 AM"
```

| Format       | Description             |
| ------------ | ----------------------- |
| (default)    | Localized date          |
| `'iso'`      | ISO 8601 format         |
| `'time'`     | Localized time          |
| `'datetime'` | Localized date and time |

### `formatCurrency(amount, currency?)`

Formats a number as currency.

```typescript
helpers.formatCurrency(1234.56);        // "$1,234.56"
helpers.formatCurrency(1234.56, 'EUR'); // "€1,234.56"
helpers.formatCurrency(1234.56, 'GBP'); // "£1,234.56"
helpers.formatCurrency(1234.56, 'JPY'); // "¥1,235"
```

### `uniqueId(prefix?)`

Generates a unique ID for DOM elements.

```typescript
helpers.uniqueId();          // "mcp-1-m3k2j1h"
helpers.uniqueId('btn');     // "btn-2-m3k2j1i"
helpers.uniqueId('modal');   // "modal-3-m3k2j1j"
```

IDs are guaranteed unique within a single template render.

### `jsonEmbed(data)`

Safely embeds JSON data in HTML, escaping characters that could break script tags.

```typescript
const data = { name: '</script><script>alert(1)</script>' };
helpers.jsonEmbed(data);
// '{"name":"\\u003c/script\\u003e\\u003cscript\\u003ealert(1)\\u003c/script\\u003e"}'
```

| Character | Escaped  |
| --------- | -------- |
| `<`       | `\u003c` |
| `>`       | `\u003e` |
| `&`       | `\u0026` |
| `'`       | `\u0027` |

```typescript
const html = `
  <script>
    const data = ${helpers.jsonEmbed(userData)};
  </script>
`;
```

### `createTemplateHelpers()`

Creates a new set of template helpers.

```typescript
import { createTemplateHelpers } from '@frontmcp/ui';

const helpers = createTemplateHelpers();
```

---

## MCP Bridge

... (content truncated for brevity)
