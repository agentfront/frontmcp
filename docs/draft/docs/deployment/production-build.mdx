---
title: Production Build
slug: deployment/production-build
icon: building
---

Build a compact Node artifact and run it behind a process manager / reverse proxy.

<Tip>
Looking to deploy to serverless platforms like Vercel, AWS Lambda, or Cloudflare Workers?
See the [Serverless Deployment](/deployment/serverless) guide.
</Tip>

## Build

<CodeGroup>

    ```bash npm
    npm run build
    ```

    ```bash yarn
    yarn build
    ```

    ```bash pnpm
    pnpm build
    ```

</CodeGroup>

This compiles TypeScript to `dist/` using `tsconfig.build.json`.

## Start

<CodeGroup>

    ```bash npm
    NODE_ENV=production PORT=8080 npm start
    ```

    ```bash yarn
    NODE_ENV=production PORT=8080 yarn start
    ```

    ```bash pnpm
    NODE_ENV=production PORT=8080 pnpm start
    ```

</CodeGroup>

## Recommended runtime setup

- Use a **process manager** (PM2, systemd) for restarts and logs.
- Put a **reverse proxy** (NGINX, Traefik, Caddy) in front for TLS and path routing.
- Pin matching versions of all `@frontmcp/*` packages.

## Dependency security scan

<Tip>
The repo now bundles the `snyk` CLI in `devDependencies`, so `npx` always runs the pinned version without any global installation.
</Tip>

<Steps>
<Step title="Authenticate the CLI">
Run the one-time login so the CLI can read your organization policies.

```bash
npx snyk auth
```

<Check>Terminal prints "Your account has been authenticated".</Check>
</Step>

<Step title="Scan the workspace before shipping">
Wire the scan right after `nx run-many -t build` (or run it manually) to fail builds on high severity issues.

```bash
npx snyk test --all-projects --severity-threshold=high
```

Use `--json` when you need machine-readable output for CI annotations.

</Step>

<Step title="Monitor production releases">
Create a monitored snapshot whenever you publish binaries so Snyk keeps watching the locked dependencies.

```bash
npx snyk monitor --project-name frontmcp-core
```

</Step>
</Steps>

<Note>
Set the `SNYK_TOKEN` environment variable in CI and secrets managers so headless jobs can authenticate without prompts.
</Note>

### Example NGINX snippet

```nginx
server {
  listen 443 ssl;
  server_name mcp.example.com;

  location /mcp/ {
    proxy_set_header Host $host;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_pass http://127.0.0.1:8080/mcp/;
  }
}
```

## Troubleshooting

- **Version mismatch** at boot → align all `@frontmcp/*` versions and reinstall.
- **No decorators** working → ensure `experimentalDecorators` + `emitDecoratorMetadata` and `import 'reflect-metadata'` at the top of `main.ts`.
- **Port conflicts** → set `http.port` in `@FrontMcp` or use `PORT` env.
